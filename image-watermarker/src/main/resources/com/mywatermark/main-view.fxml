<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/17" fx:controller="com.mywatermark.MainViewController">
    <top>
        <VBox>
            <children>
                <MenuBar>
                    <menus>
                        <Menu mnemonicParsing="false" text="File">
                            <items>
                                <MenuItem mnemonicParsing="false" onAction="#handleImportImages" text="Import Images..."/>
                                <MenuItem mnemonicParsing="false" onAction="#handleImportFolder" text="Import Folder..."/>
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" text="Template">
                            <items>
                                <MenuItem mnemonicParsing="false" onAction="#handleSaveTemplate" text="Save Template..."/>
                                <MenuItem mnemonicParsing="false" onAction="#handleLoadTemplate" text="Load Template..."/>
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <Menu fx:id="myTemplatesMenu" mnemonicParsing="false" text="My Templates" />
                            </items>
                        </Menu>
                    </menus>
                </MenuBar>
            </children>
        </VBox>
    </top>
    <left>
        <ListView fx:id="imageListView" prefWidth="200.0">
            <BorderPane.margin>
                <Insets right="5.0"/>
            </BorderPane.margin>
        </ListView>
    </left>
    <center>
        <StackPane style="-fx-background-color: derive(-fx-base, -15%);" fx:id="previewContainer">
            <children>
                <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED">
                    <content>
                        <Pane fx:id="previewPane" style="-fx-background-color: derive(-fx-base, -15%);">
                            <children>
                                <ImageView fx:id="imagePreviewView" pickOnBounds="true" preserveRatio="true"/>
                            </children>
                        </Pane>
                    </content>
                </ScrollPane>
            </children>
            <BorderPane.margin>
                <Insets top="5.0" right="5.0" bottom="5.0" left="5.0" />
            </BorderPane.margin>
        </StackPane>
    </center>
    <right>
        <VBox spacing="10.0" prefWidth="300">
            <padding>
                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0" />
            </padding>
            <children>
                <HBox alignment="CENTER" spacing="5">
                    <children>
                        <ToggleButton fx:id="textModeButton" text="Text" selected="true"/>
                        <ToggleButton fx:id="imageModeButton" text="Image"/>
                    </children>
                </HBox>
                <TitledPane fx:id="textWatermarkPane" text="Text Watermark" collapsible="false">
                    <content>
                        <GridPane hgap="10" vgap="10">
                            <padding>
                                <Insets top="10.0"/>
                            </padding>
                            <children>
                                <Label text="Text:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="watermarkTextField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                <Label text="Color:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <ColorPicker fx:id="colorPicker" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                <Label text="Opacity:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <Slider fx:id="opacitySlider" min="0" max="1" value="0.5" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                                <Label text="Font:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="fontComboBox" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                <Label text="Size:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <Slider fx:id="fontSizeSlider" min="8" max="120" value="48" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                                <Label text="Style:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                <HBox spacing="5" GridPane.rowIndex="5" GridPane.columnIndex="1">
                                    <children>
                                        <CheckBox fx:id="boldCheckBox" text="Bold"/>
                                        <CheckBox fx:id="italicCheckBox" text="Italic"/>
                                    </children>
                                </HBox>
                            </children>
                        </GridPane>
                    </content>
                </TitledPane>
                <TitledPane fx:id="imageWatermarkPane" text="Image Watermark" collapsible="false" visible="false">
                    <content>
                        <GridPane hgap="10" vgap="10">
                            <padding>
                                <Insets top="10.0"/>
                            </padding>
                            <children>
                                <Label text="Image:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="imageWatermarkField" editable="false" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                <Button text="..." onAction="#handleSelectImageWatermark" GridPane.rowIndex="0" GridPane.columnIndex="2"/>

                                <Label text="Opacity:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <Slider fx:id="imageOpacitySlider" min="0" max="1" value="0.5" GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

                                <Label text="Scale:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <Slider fx:id="imageScaleSlider" min="0.1" max="2" value="1" GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.columnSpan="2"/>
                            </children>
                        </GridPane>
                    </content>
                </TitledPane>
                <TitledPane text="Layout" collapsible="false">
                    <content>
                        <GridPane hgap="5" vgap="5">
                            <padding>
                                <Insets top="10.0"/>
                            </padding>
                            <children>
                                <Button text="↖" onAction="#handlePositionTopLeft" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <Button text="↑" onAction="#handlePositionTopCenter" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                <Button text="↗" onAction="#handlePositionTopRight" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                <Button text="←" onAction="#handlePositionCenterLeft" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <Button text="+" onAction="#handlePositionCenter" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                                <Button text="→" onAction="#handlePositionCenterRight" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                                <Button text="↙" onAction="#handlePositionBottomLeft" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <Button text="↓" onAction="#handlePositionBottomCenter" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                                <Button text="↘" onAction="#handlePositionBottomRight" GridPane.rowIndex="2" GridPane.columnIndex="2"/>

                                <Label text="X:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <TextField fx:id="xField" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                <Label text="Y:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <TextField fx:id="yField" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                                <Label text="Rotation:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                <Slider fx:id="rotationSlider" min="-180" max="180" value="0" GridPane.rowIndex="5" GridPane.columnIndex="1" GridPane.columnSpan="2"/>
                            </children>
                        </GridPane>
                    </content>
                </TitledPane>
                <TitledPane text="Export" collapsible="false">
                    <content>
                        <GridPane hgap="10" vgap="10">
                            <padding>
                                <Insets top="10.0"/>
                            </padding>
                            <children>
                                <Label text="Output:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="outputDirField" editable="false" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                <Button text="..." onAction="#handleSelectOutputDir" GridPane.rowIndex="0" GridPane.columnIndex="2"/>

                                <Label text="Naming:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="namingConventionBox" GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

                                <Label text="Prefix/Suffix:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <TextField fx:id="prefixSuffixField" GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

                                <Label text="Format:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="formatBox" GridPane.rowIndex="3" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

                                <Label fx:id="qualityLabel" text="Quality:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <Slider fx:id="qualitySlider" min="0" max="100" value="80" GridPane.rowIndex="4" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

                                <VBox spacing="5" GridPane.rowIndex="5" GridPane.columnIndex="0" GridPane.columnSpan="3">
                                    <children>
                                        <Button fx:id="exportButton" text="Export" onAction="#handleExport" maxWidth="Infinity"/>
                                        <Label fx:id="exportProgressLabel" text="Progress..." visible="false"/>
                                        <ProgressBar fx:id="exportProgressBar" progress="0.0" maxWidth="Infinity" visible="false"/>
                                    </children>
                                </VBox>
                            </children>
                        </GridPane>
                    </content>
                </TitledPane>
            </children>
        </VBox>
    </right>
</BorderPane>
